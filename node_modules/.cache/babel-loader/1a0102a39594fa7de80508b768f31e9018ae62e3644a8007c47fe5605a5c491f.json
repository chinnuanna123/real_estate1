{"ast":null,"code":"var _jsxFileName = \"D:\\\\home-buyer test\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid\n\n// Define the type for Google Search Results (raw from tool)\n\n// Define interfaces for data structures based on your backend\n\n// Define the expected successful API response structure for /process_query endpoint\n\n// Define the expected successful API response structure for /load_preferences and /save_preferences\n\n// Define the expected error API response structure from FastAPI HTTPException\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// Ensure Tailwind CSS is available in the environment.\n// This code assumes Tailwind CSS is configured and available.\n\n// Define your FastAPI backend URL\nconst API_BASE_URL = \"http://127.0.0.1:8000/api/v1/properties\"; // Corrected to match your router prefix\n\nfunction App() {\n  _s();\n  const [userId, setUserId] = useState(null);\n  const [isAppReady, setIsAppReady] = useState(false);\n  const [userQuery, setUserQuery] = useState(''); // Changed from 'preferences' for clarity\n  const [properties, setProperties] = useState([]); // Can hold both mock & parsed Google\n  const [googleSearchResultsRaw, setGoogleSearchResultsRaw] = useState([]); // For raw Google results display\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedProperty, setSelectedProperty] = useState(null);\n  const [message, setMessage] = useState(null); // Use null for no message\n\n  // Modals and their data\n  const [negotiationResult, setNegotiationResult] = useState('');\n  const [showNegotiationModal, setShowNegotiationModal] = useState(false);\n  const [legalGuidance, setLegalGuidance] = useState('');\n  const [showLegalModal, setShowLegalModal] = useState(false);\n  const [mortgageRecommendations, setMortgageRecommendations] = useState(''); // Changed to string as LLM gives text\n  const [showMortgageModal, setShowMortgageModal] = useState(false);\n  const [neighborhoodInsights, setNeighborhoodInsights] = useState('');\n  const [showNeighborhoodModal, setShowNeighborhoodModal] = useState(false);\n  const [marketingDescription, setMarketingDescription] = useState('');\n  const [showMarketingDescriptionModal, setShowMarketingDescriptionModal] = useState(false);\n\n  // Input for negotiation\n  const [targetNegotiationPrice, setTargetNegotiationPrice] = useState('');\n\n  // Inputs for mortgage - sensible defaults for India\n  const [mortgageIncome, setMortgageIncome] = useState(1200000); // Example: 12 Lakhs annual\n  const [mortgageCreditScore, setMortgageCreditScore] = useState(750);\n  const [mortgageDownPayment, setMortgageDownPayment] = useState(2000000); // Example: 20 Lakhs\n  const [mortgageLoanAmount, setMortgageLoanAmount] = useState(8000000); // Example: 80 Lakhs\n  const [mortgagePropertyType, setMortgagePropertyType] = useState('apartment');\n\n  // Initialize unique user ID from localStorage or generate a new one\n  useEffect(() => {\n    const currentUserId = localStorage.getItem('ai_home_buyer_user_id') || uuidv4();\n    localStorage.setItem('ai_home_buyer_user_id', currentUserId);\n    setUserId(currentUserId);\n    console.log('User ID set:', currentUserId);\n    setIsAppReady(true); // App is ready once user ID is determined\n  }, []);\n\n  // Load user preferences from backend when app is ready and userId is available\n  useEffect(() => {\n    const loadUserPreferencesFromBackend = async () => {\n      if (isAppReady && userId) {\n        try {\n          const response = await fetch(`${API_BASE_URL}/load_preferences/${userId}`);\n          if (!response.ok) {\n            // If response is not OK, it's an HTTP error (e.g., 404 Not Found)\n            const errorResult = await response.json();\n            // --- CHANGE HERE ---\n            if (response.status === 404) {\n              // This is expected for new users, so set an info message\n              setMessage({\n                text: 'No previous preferences found. Start by describing your dream home!',\n                type: 'info'\n              });\n            } else {\n              // For other HTTP errors, still treat as a critical error\n              throw new Error(errorResult.detail || 'Failed to load preferences due to backend error.');\n            }\n            // Clear any existing preferences if loading failed or not found\n            setUserQuery('');\n            setProperties([]);\n            return; // Exit early if loading failed or not found\n          }\n\n          // If response is OK, it should be a success response\n          const result = await response.json();\n          if (result.status === 'success' && result.data) {\n            // Check for result.data existence\n            setUserQuery(result.data.homePreferences || '');\n            setProperties(result.data.lastSearchResults || []); // Load last search results\n            setMessage({\n              text: 'Preferences loaded successfully!',\n              type: 'success'\n            });\n          } else {\n            // This else block would hit if response.ok is true but status is not 'success'\n            // or if data is unexpectedly empty.\n            console.log(\"Unexpected success response structure for preferences load:\", result);\n            setMessage({\n              text: 'No previous preferences found or unexpected data format. Please save your preferences.',\n              type: 'info'\n            });\n            setUserQuery('');\n            setProperties([]);\n          }\n        } catch (error) {\n          console.error(\"Error fetching user preferences from backend:\", error);\n          setMessage({\n            text: `Error loading preferences: ${error.message}`,\n            type: 'error'\n          });\n          setUserQuery('');\n          setProperties([]);\n        }\n      }\n    };\n    loadUserPreferencesFromBackend();\n  }, [isAppReady, userId]); // Re-run when app readiness or userId changes\n\n  // Function to save user preferences and results to backend\n  const savePreferences = async (currentQuery, currentResults) => {\n    if (!userId) {\n      setMessage({\n        text: 'User not ready. Cannot save preferences.',\n        type: 'error'\n      });\n      return;\n    }\n    try {\n      // Assuming a /save_preferences endpoint exists in your backend\n      const response = await fetch(`${API_BASE_URL}/save_preferences`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          preferences: {\n            homePreferences: currentQuery,\n            lastSearchResults: currentResults\n          }\n        })\n      });\n      if (response.ok) {\n        // Use the specific interface for saving preferences\n        const result = await response.json();\n        setMessage({\n          text: result.message || 'Preferences saved successfully!',\n          type: 'success'\n        });\n      } else {\n        const errorResult = await response.json();\n        setMessage({\n          text: `Failed to save preferences: ${errorResult.detail || 'Unknown error'}`,\n          type: 'error'\n        });\n      }\n    } catch (error) {\n      console.error(\"Error saving preferences to backend:\", error);\n      setMessage({\n        text: `Error saving preferences: ${error.message}`,\n        type: 'error'\n      });\n    }\n  };\n\n  // Centralized function to process all user queries\n  const processAgentRequest = async (intentQuery, additionalParams = {}) => {\n    if (!userId) {\n      setMessage({\n        text: 'User ID not ready. Please try again.',\n        type: 'error'\n      });\n      return;\n    }\n    setIsLoading(true);\n    setMessage(null); // Clear previous messages\n    setProperties([]); // Clear properties on new search\n    setGoogleSearchResultsRaw([]); // Clear raw Google results on new search\n    // Close all modals when a new request is made\n    setShowNegotiationModal(false);\n    setShowLegalModal(false);\n    setShowMortgageModal(false);\n    setShowNeighborhoodModal(false);\n    setShowMarketingDescriptionModal(false);\n    try {\n      const response = await fetch(`${API_BASE_URL}/process_query`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          query: intentQuery,\n          ...additionalParams\n        })\n      });\n\n      // Handle non-OK responses (HTTP errors) first\n      if (!response.ok) {\n        const errorResult = await response.json(); // Expecting { \"detail\": \"...\" }\n        throw new Error(errorResult.detail || 'Unknown backend error');\n      }\n\n      // If response is OK, parse it as ProcessQueryResponseSuccess\n      const result = await response.json();\n      console.log('Backend Response:', result);\n      if (result.status === 'success' && result.data) {\n        switch (result.data.type) {\n          case 'properties':\n            setProperties(result.data.data);\n            await savePreferences(userQuery, result.data.data); // Save the results\n            setMessage({\n              text: 'Properties found!',\n              type: 'success'\n            });\n            break;\n          case 'Google Search':\n            // Note the space in 'Google Search' from your backend tool\n            // When PropertySearch falls back to Google Search, it returns raw google results.\n            setGoogleSearchResultsRaw(result.data.data);\n            setMessage({\n              text: 'No mocked properties found. Displaying raw Google Search results.',\n              type: 'info'\n            });\n            break;\n          case 'negotiation_result':\n            setNegotiationResult(result.data.data);\n            setShowNegotiationModal(true);\n            setMessage({\n              text: 'Negotiation simulation complete!',\n              type: 'success'\n            });\n            break;\n          case 'legal_guidance':\n            setLegalGuidance(result.data.data);\n            setShowLegalModal(true);\n            setMessage({\n              text: 'Legal guidance provided!',\n              type: 'success'\n            });\n            break;\n          case 'mortgage_recommendations':\n            setMortgageRecommendations(result.data.data); // result.data.data is string\n            setShowMortgageModal(true);\n            setMessage({\n              text: 'Mortgage recommendations generated!',\n              type: 'success'\n            });\n            break;\n          case 'neighborhood_insights':\n            setNeighborhoodInsights(result.data.data);\n            setShowNeighborhoodModal(true);\n            setMessage({\n              text: 'Neighborhood insights retrieved!',\n              type: 'success'\n            });\n            break;\n          case 'marketing_description':\n            setMarketingDescription(result.data.data);\n            setShowMarketingDescriptionModal(true);\n            setMessage({\n              text: 'Marketing description generated!',\n              type: 'success'\n            });\n            break;\n          case 'error':\n            // Explicitly handle backend errors wrapped in a 'success' status\n            setMessage({\n              text: `Backend Error: ${result.data.message || 'Unknown error'}`,\n              type: 'error'\n            });\n            break;\n          default:\n            // This assertion tells TypeScript that result.data at this point must have a 'type' property.\n            // This is a pragmatic fix for TypeScript's sometimes over-aggressive type narrowing.\n            setMessage({\n              text: `Received unknown response type: ${result.data.type}`,\n              type: 'warning'\n            });\n            break;\n        }\n      } else {\n        // This 'else' block will be reached if `response.ok` was true, but `result.status` is not 'success'.\n        // This implies a successful API call but a logical failure indicated by the backend's 'status' field.\n        // Based on your backend, this block should ideally not be hit for /process_query.\n        setMessage({\n          text: `Backend operation failed with unexpected status: ${result.status || 'Unknown'}`,\n          type: 'error'\n        });\n      }\n    } catch (error) {\n      console.error(\"Error processing agent request:\", error);\n      setMessage({\n        text: `Client error: ${error.message}. Please ensure backend is running.`,\n        type: 'error'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleSearchClick = () => {\n    if (!userQuery.trim()) {\n      setMessage({\n        text: 'Please describe your desired home to search.',\n        type: 'info'\n      });\n      return;\n    }\n    processAgentRequest(userQuery); // User query directly goes to process_query\n  };\n  const handleNegotiateClick = () => {\n    if (!selectedProperty) {\n      setMessage({\n        text: 'Please select a property first to negotiate.',\n        type: 'info'\n      });\n      return;\n    }\n    if (!targetNegotiationPrice.trim()) {\n      setMessage({\n        text: 'Please enter a target price for negotiation.',\n        type: 'info'\n      });\n      return;\n    }\n    processAgentRequest(`Simulate negotiation for ${selectedProperty.name}`, {\n      property_details: selectedProperty,\n      target_negotiation_price: targetNegotiationPrice\n    });\n  };\n  const handleLegalGuidanceClick = () => {\n    processAgentRequest(\"Provide legal guidance for buying a property in India.\");\n  };\n  const handleMortgageRecommendationsClick = () => {\n    // Basic validation for mortgage inputs\n    if (mortgageIncome <= 0 || mortgageCreditScore <= 0 || mortgageDownPayment < 0 || mortgageLoanAmount <= 0) {\n      setMessage({\n        text: 'Please enter valid positive numbers for all mortgage inputs.',\n        type: 'info'\n      });\n      return;\n    }\n    if (mortgageDownPayment + mortgageLoanAmount <= 0) {\n      setMessage({\n        text: 'Down payment and loan amount cannot both be zero.',\n        type: 'info'\n      });\n      return;\n    }\n\n    // Robust price parsing from selectedProperty.price string\n    let effectiveLoanAmount = mortgageLoanAmount;\n    let effectiveDownPayment = mortgageDownPayment;\n    let effectivePropertyType = mortgagePropertyType;\n    if (selectedProperty) {\n      var _selectedProperty$nam, _selectedProperty$nam2;\n      const priceString = selectedProperty.price.replace(/[₹,]/g, '').toLowerCase();\n      let parsedPriceValueInLakhs = null;\n      const lakhMatch = priceString.match(/(\\d+\\.?\\d*)\\s*lakh/);\n      const croreMatch = priceString.match(/(\\d+\\.?\\d*)\\s*crore/);\n      if (lakhMatch) {\n        parsedPriceValueInLakhs = parseFloat(lakhMatch[1]);\n      } else if (croreMatch) {\n        parsedPriceValueInLakhs = parseFloat(croreMatch[1]) * 100; // Convert Crores to Lakhs\n      } else {\n        // Fallback for raw numbers without unit, assume lakhs if large enough, or just use as is\n        const rawNumber = parseFloat(priceString);\n        if (!isNaN(rawNumber)) {\n          if (rawNumber > 10000000) {\n            // Heuristic: if very large number, assume it's in absolute INR, convert to lakhs\n            parsedPriceValueInLakhs = rawNumber / 100000;\n          } else if (rawNumber > 100000) {\n            // Heuristic: if large number, assume it's in absolute INR, convert to lakhs\n            parsedPriceValueInLakhs = rawNumber / 100000;\n          } else {\n            parsedPriceValueInLakhs = rawNumber; // Assume it's already in lakhs or a smaller unit\n          }\n        }\n      }\n      if (parsedPriceValueInLakhs !== null && !isNaN(parsedPriceValueInLakhs) && parsedPriceValueInLakhs > 0) {\n        // If a valid property price is parsed, use it to calculate loan/down payment\n        // Convert lakhs to absolute INR for the backend if needed, or backend handles lakhs directly\n        effectiveLoanAmount = parsedPriceValueInLakhs * 0.8 * 100000; // 80% loan of property price (in Lakhs, convert to absolute INR)\n        effectiveDownPayment = parsedPriceValueInLakhs * 0.2 * 100000; // 20% down payment (in Lakhs, convert to absolute INR)\n        setMessage({\n          text: `Using property price (${parsedPriceValueInLakhs} Lakhs) for mortgage calculation.`,\n          type: 'info'\n        });\n      } else {\n        setMessage({\n          text: `Could not parse price from selected property (${selectedProperty.price}). Using manual mortgage inputs.`,\n          type: 'warning'\n        });\n      }\n\n      // Simple heuristic for property type based on name\n      effectivePropertyType = selectedProperty !== null && selectedProperty !== void 0 && (_selectedProperty$nam = selectedProperty.name) !== null && _selectedProperty$nam !== void 0 && _selectedProperty$nam.toLowerCase().includes('villa') || selectedProperty !== null && selectedProperty !== void 0 && (_selectedProperty$nam2 = selectedProperty.name) !== null && _selectedProperty$nam2 !== void 0 && _selectedProperty$nam2.toLowerCase().includes('house') ? 'independent house' : 'apartment';\n    }\n    processAgentRequest(\"Provide mortgage recommendations.\", {\n      income: mortgageIncome,\n      credit_score: mortgageCreditScore,\n      down_payment: effectiveDownPayment,\n      loan_amount: effectiveLoanAmount,\n      property_type: effectivePropertyType\n    });\n  };\n  const handleNeighborhoodInsightsClick = () => {\n    if (!selectedProperty || !selectedProperty.location) {\n      setMessage({\n        text: 'Please select a property with a valid location to get neighborhood insights.',\n        type: 'info'\n      });\n      return;\n    }\n    processAgentRequest(`Provide neighborhood insights for ${selectedProperty.location}`, {\n      property_details: selectedProperty\n    });\n  };\n  const handleMarketingDescriptionClick = () => {\n    if (!selectedProperty) {\n      setMessage({\n        text: 'Please select a property to generate a marketing description.',\n        type: 'info'\n      });\n      return;\n    }\n    processAgentRequest(`Generate marketing description for ${selectedProperty.name}`, {\n      property_details: selectedProperty\n    });\n  };\n\n  // --- Simulated Backend Actions (from home_buying_route.py) ---\n  const handleSimulatedAction = async (endpoint, details) => {\n    if (!userId) {\n      setMessage({\n        text: 'User ID not ready. Cannot perform action.',\n        type: 'error'\n      });\n      return;\n    }\n    try {\n      const res = await fetch(`${API_BASE_URL}/${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(details)\n      });\n      if (!res.ok) {\n        const errorResult = await res.json();\n        throw new Error(errorResult.detail || `Failed to perform ${endpoint} due to backend error.`);\n      }\n      const data = await res.json(); // Assuming success data is { status: \"success\", message: \"...\" }\n      setMessage({\n        text: data.message,\n        type: 'success'\n      });\n    } catch (err) {\n      setMessage({\n        text: `Error performing ${endpoint}: ${err.message}`,\n        type: 'error'\n      });\n    }\n  };\n\n  // Modals for displaying responses\n  const Modal = ({\n    title,\n    content,\n    isOpen,\n    onClose\n  }) => {\n    if (!isOpen) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold mb-4 text-gray-800\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700 whitespace-pre-wrap break-words\",\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"mt-6 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this);\n  };\n  if (!isAppReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-screen text-lg text-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"animate-spin -ml-1 mr-3 h-8 w-8 text-blue-500\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n          className: \"opacity-25\",\n          cx: \"12\",\n          cy: \"12\",\n          r: \"10\",\n          stroke: \"currentColor\",\n          strokeWidth: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          className: \"opacity-75\",\n          fill: \"currentColor\",\n          d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), \"Loading application...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 sm:p-6 font-inter text-gray-800 flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-4xl bg-white rounded-xl shadow-2xl p-6 sm:p-8 space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl sm:text-4xl font-extrabold text-center text-indigo-700 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-8 w-8 sm:h-10 sm:w-10 inline-block mr-2 text-blue-500\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l7 7m-9-9v10a1 1 0 001 1h3m-6-11h8a2 2 0 012 2v8a2 2 0 01-2 2h-8a2 2 0 01-2-2v-8a2 2 0 012-2z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), \"AI Home Buying Assistant\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this), userId && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-center text-gray-600 mb-4\",\n        children: [\"Your User ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold text-indigo-600 break-all\",\n          children: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-3 rounded-lg text-center font-medium ${message.type === 'success' ? 'bg-green-100 text-green-700' : message.type === 'error' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'}`,\n        children: message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"preferences\",\n          className: \"block text-lg font-semibold text-gray-700\",\n          children: \"Tell me about your dream home:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"preferences\",\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200 resize-y min-h-[100px]\",\n          placeholder: \"e.g., 'A 3-bedroom apartment in Koramangala, Bangalore, with a budget of 1.2 Crore, near good schools and a park. Modern design, good natural light, and a balcony.' Or 'Find me a 2BHK in a nearby area with high rental under Rs 50 Lakhs.'\",\n          value: userQuery // Changed from 'preferences'\n          ,\n          onChange: e => setUserQuery(e.target.value) // Changed from 'setPreferences'\n          ,\n          disabled: isLoading || !isAppReady\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSearchClick // Changed from handleSearch\n          ,\n          className: \"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\",\n          disabled: isLoading || !isAppReady,\n          children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                className: \"opacity-25\",\n                cx: \"12\",\n                cy: \"12\",\n                r: \"10\",\n                stroke: \"currentColor\",\n                strokeWidth: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                className: \"opacity-75\",\n                fill: \"currentColor\",\n                d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), \"Searching...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-5 w-5 mr-2\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 17\n            }, this), \"Find My Home\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 flex justify-center gap-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => savePreferences(userQuery, properties),\n          className: \"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition duration-200 text-sm\",\n          children: \"Save Current Preferences\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this), selectedProperty && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-blue-800 mb-2\",\n          children: \"Selected Property:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-blue-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: selectedProperty.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this), \" (\", selectedProperty.location, \") - \", selectedProperty.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSelectedProperty(null),\n          className: \"mt-2 px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 transition duration-200\",\n          children: \"Clear Selection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex flex-col gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-700\",\n            children: \"Actions for Selected Property:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: targetNegotiationPrice,\n              onChange: e => setTargetNegotiationPrice(e.target.value),\n              placeholder: \"Target Price (e.g., \\u20B990 Lakh)\",\n              className: \"p-2 border border-gray-300 rounded-md flex-grow text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNegotiateClick,\n              className: \"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200 disabled:opacity-50 font-semibold\",\n              disabled: isLoading,\n              children: \"Simulate Negotiation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border p-3 rounded-md bg-gray-50 flex flex-col gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"Mortgage Details (for simulation):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 sm:grid-cols-2 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Annual Income (\\u20B9)\",\n                value: mortgageIncome,\n                onChange: e => setMortgageIncome(parseFloat(e.target.value) || 0),\n                className: \"p-2 border rounded-md text-gray-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Credit Score\",\n                value: mortgageCreditScore,\n                onChange: e => setMortgageCreditScore(parseInt(e.target.value) || 0),\n                className: \"p-2 border rounded-md text-gray-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Down Payment (\\u20B9)\",\n                value: mortgageDownPayment,\n                onChange: e => setMortgageDownPayment(parseFloat(e.target.value) || 0),\n                className: \"p-2 border rounded-md text-gray-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Loan Amount (\\u20B9)\",\n                value: mortgageLoanAmount,\n                onChange: e => setMortgageLoanAmount(parseFloat(e.target.value) || 0),\n                className: \"p-2 border rounded-md text-gray-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: mortgagePropertyType,\n              onChange: e => setMortgagePropertyType(e.target.value),\n              className: \"p-2 border rounded-md text-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"apartment\",\n                children: \"Apartment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"independent house\",\n                children: \"Independent House\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"villa\",\n                children: \"Villa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"plot\",\n                children: \"Plot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleMortgageRecommendationsClick,\n              className: \"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200 disabled:opacity-50 font-semibold mt-2\",\n              disabled: isLoading,\n              children: \"Get Mortgage Recommendations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNeighborhoodInsightsClick,\n            className: \"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200 disabled:opacity-50 font-semibold\",\n            disabled: isLoading,\n            children: \"Get Neighborhood Insights\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleMarketingDescriptionClick,\n            className: \"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200 disabled:opacity-50 font-semibold\",\n            disabled: isLoading,\n            children: \"Generate Marketing Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSimulatedAction('book_visit', selectedProperty),\n            className: \"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition duration-200 disabled:opacity-50 font-semibold\",\n            disabled: isLoading,\n            children: \"Simulate Book Visit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSimulatedAction('handle_paperwork', selectedProperty),\n            className: \"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 transition duration-200 disabled:opacity-50 font-semibold\",\n            disabled: isLoading,\n            children: \"Simulate Handle Paperwork\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex flex-wrap justify-center gap-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLegalGuidanceClick,\n          className: \"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200 disabled:opacity-50 font-semibold\",\n          disabled: isLoading,\n          children: \"Get Legal Guidance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mt-6 p-3 rounded-md text-center font-medium ${message.type === 'error' ? 'bg-red-100 text-red-800' : message.type === 'success' ? 'bg-green-100 text-green-700' : 'bg-blue-100 text-blue-700'}`,\n        children: message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded-lg shadow-md w-full max-w-4xl mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-800 mb-4 text-center\",\n        children: \"Search Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 9\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-600\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 23\n      }, this), properties.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n        children: properties.map(property => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border border-gray-200 rounded-lg shadow-sm overflow-hidden flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: property.imageUrl || \"https://via.placeholder.co/400x300?text=No+Image\",\n            alt: property.name,\n            className: \"w-full h-48 object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex-grow\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-900 mb-1\",\n              children: property.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-700 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Location:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 53\n              }, this), \" \", property.location]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-700 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Price:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 53\n              }, this), \" \", property.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 text-sm\",\n              children: [property.bedrooms, \" BHK | \", property.bathrooms, \" Bath | \", property.areaSqFt, \" SqFt\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 text-sm mt-2 line-clamp-3\",\n              children: property.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-200 flex justify-between items-center gap-2\",\n            children: [property.link && /*#__PURE__*/_jsxDEV(\"a\", {\n              href: property.link,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              className: \"text-blue-600 hover:text-blue-800 text-sm flex-grow\",\n              children: \"View Source\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelectedProperty(property),\n              className: \"px-3 py-1 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 transition duration-200\",\n              children: \"Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 17\n          }, this)]\n        }, property.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 11\n      }, this), googleSearchResultsRaw.length > 0 && properties.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-800 mb-4\",\n          children: \"Raw Google Search Results:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: googleSearchResultsRaw.map((result, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border border-gray-200 p-4 rounded-lg shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-lg font-medium text-blue-700 hover:underline\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: result.link,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: result.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 text-sm mt-1\",\n              children: result.snippet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: result.link\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 29\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 13\n      }, this), !isLoading && properties.length === 0 && googleSearchResultsRaw.length === 0 && message && message.type !== 'error' && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500\",\n        children: \"No properties found yet. Try a search above!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Negotiation Simulation Result\",\n      content: negotiationResult,\n      isOpen: showNegotiationModal,\n      onClose: () => setShowNegotiationModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Legal Guidance for Property Buying in India\",\n      content: legalGuidance,\n      isOpen: showLegalModal,\n      onClose: () => setShowLegalModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Mortgage Recommendations\",\n      content: mortgageRecommendations,\n      isOpen: showMortgageModal,\n      onClose: () => setShowMortgageModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Neighborhood Insights\",\n      content: neighborhoodInsights,\n      isOpen: showNeighborhoodModal,\n      onClose: () => setShowNeighborhoodModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 728,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Marketing Description\",\n      content: marketingDescription,\n      isOpen: showMarketingDescriptionModal,\n      onClose: () => setShowMarketingDescriptionModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 466,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"9ZfpSER7OWl/BFBLYVoe9H45gE0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","v4","uuidv4","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","App","_s","userId","setUserId","isAppReady","setIsAppReady","userQuery","setUserQuery","properties","setProperties","googleSearchResultsRaw","setGoogleSearchResultsRaw","isLoading","setIsLoading","selectedProperty","setSelectedProperty","message","setMessage","negotiationResult","setNegotiationResult","showNegotiationModal","setShowNegotiationModal","legalGuidance","setLegalGuidance","showLegalModal","setShowLegalModal","mortgageRecommendations","setMortgageRecommendations","showMortgageModal","setShowMortgageModal","neighborhoodInsights","setNeighborhoodInsights","showNeighborhoodModal","setShowNeighborhoodModal","marketingDescription","setMarketingDescription","showMarketingDescriptionModal","setShowMarketingDescriptionModal","targetNegotiationPrice","setTargetNegotiationPrice","mortgageIncome","setMortgageIncome","mortgageCreditScore","setMortgageCreditScore","mortgageDownPayment","setMortgageDownPayment","mortgageLoanAmount","setMortgageLoanAmount","mortgagePropertyType","setMortgagePropertyType","currentUserId","localStorage","getItem","setItem","console","log","loadUserPreferencesFromBackend","response","fetch","ok","errorResult","json","status","text","type","Error","detail","result","data","homePreferences","lastSearchResults","error","savePreferences","currentQuery","currentResults","method","headers","body","JSON","stringify","user_id","preferences","processAgentRequest","intentQuery","additionalParams","query","handleSearchClick","trim","handleNegotiateClick","name","property_details","target_negotiation_price","handleLegalGuidanceClick","handleMortgageRecommendationsClick","effectiveLoanAmount","effectiveDownPayment","effectivePropertyType","_selectedProperty$nam","_selectedProperty$nam2","priceString","price","replace","toLowerCase","parsedPriceValueInLakhs","lakhMatch","match","croreMatch","parseFloat","rawNumber","isNaN","includes","income","credit_score","down_payment","loan_amount","property_type","handleNeighborhoodInsightsClick","location","handleMarketingDescriptionClick","handleSimulatedAction","endpoint","details","res","err","Modal","title","content","isOpen","onClose","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","strokeLinecap","strokeLinejoin","htmlFor","id","placeholder","value","onChange","e","target","disabled","parseInt","length","map","property","src","imageUrl","alt","bedrooms","bathrooms","areaSqFt","description","link","href","rel","index","snippet","_c","$RefreshReg$"],"sources":["D:/home-buyer test/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid\r\n\r\n// Define the type for Google Search Results (raw from tool)\r\ninterface GoogleSearchResult {\r\n  title: string;\r\n  snippet: string;\r\n  link: string;\r\n}\r\n\r\n// Define interfaces for data structures based on your backend\r\ninterface PropertyDetails {\r\n  id: string;\r\n  name: string;\r\n  location: string;\r\n  price: string; // Keep as string as LLM returns this way (e.g., \"₹1.5 Crore\")\r\n  bedrooms: number;\r\n  bathrooms: number;\r\n  areaSqFt: number;\r\n  description: string;\r\n  imageUrl: string;\r\n  link?: string; // Optional for Google Search results\r\n}\r\n\r\ninterface ProcessQueryRequest {\r\n  user_id: string;\r\n  query: string;\r\n  property_details?: PropertyDetails;\r\n  target_negotiation_price?: string;\r\n  // Parameters for mortgage recommendation, directly passed to backend\r\n  income?: number;\r\n  credit_score?: number;\r\n  down_payment?: number;\r\n  loan_amount?: number;\r\n  property_type?: string;\r\n}\r\n\r\n// Define the expected successful API response structure for /process_query endpoint\r\ninterface ProcessQueryResponseSuccess {\r\n  status: 'success';\r\n  data:\r\n    | { type: 'properties'; data: PropertyDetails[] }\r\n    | { type: 'Google Search'; data: GoogleSearchResult[] }\r\n    | { type: 'negotiation_result'; data: string }\r\n    | { type: 'legal_guidance'; data: string }\r\n    | { type: 'mortgage_recommendations'; data: string }\r\n    | { type: 'neighborhood_insights'; data: string }\r\n    | { type: 'marketing_description'; data: string }\r\n    | { type: 'error'; message: string; error?: string; }; // Explicitly define error structure within 'data'\r\n}\r\n\r\n// Define the expected successful API response structure for /load_preferences and /save_preferences\r\ninterface LoadSavePreferencesResponseSuccess {\r\n  status: 'success';\r\n  data?: { // Data is optional for save_preferences, but present for load_preferences\r\n    homePreferences?: string;\r\n    lastSearchResults?: PropertyDetails[];\r\n  };\r\n  message?: string; // For save_preferences success message\r\n}\r\n\r\n// Define the expected error API response structure from FastAPI HTTPException\r\ninterface ApiResponseError {\r\n  detail: string;\r\n}\r\n\r\n// Ensure Tailwind CSS is available in the environment.\r\n// This code assumes Tailwind CSS is configured and available.\r\n\r\n// Define your FastAPI backend URL\r\nconst API_BASE_URL = \"http://127.0.0.1:8000/api/v1/properties\"; // Corrected to match your router prefix\r\n\r\nfunction App() {\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [isAppReady, setIsAppReady] = useState(false);\r\n  const [userQuery, setUserQuery] = useState<string>(''); // Changed from 'preferences' for clarity\r\n  const [properties, setProperties] = useState<PropertyDetails[]>([]); // Can hold both mock & parsed Google\r\n  const [googleSearchResultsRaw, setGoogleSearchResultsRaw] = useState<GoogleSearchResult[]>([]); // For raw Google results display\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedProperty, setSelectedProperty] = useState<PropertyDetails | null>(null);\r\n  const [message, setMessage] = useState<{ text: string; type: string } | null>(null); // Use null for no message\r\n\r\n  // Modals and their data\r\n  const [negotiationResult, setNegotiationResult] = useState<string>('');\r\n  const [showNegotiationModal, setShowNegotiationModal] = useState<boolean>(false);\r\n  const [legalGuidance, setLegalGuidance] = useState<string>('');\r\n  const [showLegalModal, setShowLegalModal] = useState<boolean>(false);\r\n  const [mortgageRecommendations, setMortgageRecommendations] = useState<string>(''); // Changed to string as LLM gives text\r\n  const [showMortgageModal, setShowMortgageModal] = useState<boolean>(false);\r\n  const [neighborhoodInsights, setNeighborhoodInsights] = useState<string>('');\r\n  const [showNeighborhoodModal, setShowNeighborhoodModal] = useState<boolean>(false);\r\n  const [marketingDescription, setMarketingDescription] = useState<string>('');\r\n  const [showMarketingDescriptionModal, setShowMarketingDescriptionModal] = useState<boolean>(false);\r\n\r\n  // Input for negotiation\r\n  const [targetNegotiationPrice, setTargetNegotiationPrice] = useState<string>('');\r\n\r\n  // Inputs for mortgage - sensible defaults for India\r\n  const [mortgageIncome, setMortgageIncome] = useState<number>(1200000); // Example: 12 Lakhs annual\r\n  const [mortgageCreditScore, setMortgageCreditScore] = useState<number>(750);\r\n  const [mortgageDownPayment, setMortgageDownPayment] = useState<number>(2000000); // Example: 20 Lakhs\r\n  const [mortgageLoanAmount, setMortgageLoanAmount] = useState<number>(8000000); // Example: 80 Lakhs\r\n  const [mortgagePropertyType, setMortgagePropertyType] = useState<string>('apartment');\r\n\r\n\r\n  // Initialize unique user ID from localStorage or generate a new one\r\n  useEffect(() => {\r\n    const currentUserId: string = localStorage.getItem('ai_home_buyer_user_id') || uuidv4();\r\n    localStorage.setItem('ai_home_buyer_user_id', currentUserId);\r\n\r\n    setUserId(currentUserId);\r\n    console.log('User ID set:', currentUserId);\r\n    setIsAppReady(true); // App is ready once user ID is determined\r\n  }, []);\r\n\r\n  // Load user preferences from backend when app is ready and userId is available\r\n  useEffect(() => {\r\n    const loadUserPreferencesFromBackend = async () => {\r\n      if (isAppReady && userId) {\r\n        try {\r\n          const response = await fetch(`${API_BASE_URL}/load_preferences/${userId}`);\r\n          \r\n          if (!response.ok) {\r\n            // If response is not OK, it's an HTTP error (e.g., 404 Not Found)\r\n            const errorResult: ApiResponseError = await response.json();\r\n            // --- CHANGE HERE ---\r\n            if (response.status === 404) {\r\n                // This is expected for new users, so set an info message\r\n                setMessage({ text: 'No previous preferences found. Start by describing your dream home!', type: 'info' });\r\n            } else {\r\n                // For other HTTP errors, still treat as a critical error\r\n                throw new Error(errorResult.detail || 'Failed to load preferences due to backend error.');\r\n            }\r\n            // Clear any existing preferences if loading failed or not found\r\n            setUserQuery('');\r\n            setProperties([]);\r\n            return; // Exit early if loading failed or not found\r\n          }\r\n\r\n          // If response is OK, it should be a success response\r\n          const result: LoadSavePreferencesResponseSuccess = await response.json();\r\n\r\n          if (result.status === 'success' && result.data) { // Check for result.data existence\r\n            setUserQuery(result.data.homePreferences || '');\r\n            setProperties(result.data.lastSearchResults || []); // Load last search results\r\n            setMessage({ text: 'Preferences loaded successfully!', type: 'success' });\r\n          } else {\r\n            // This else block would hit if response.ok is true but status is not 'success'\r\n            // or if data is unexpectedly empty.\r\n            console.log(\"Unexpected success response structure for preferences load:\", result);\r\n            setMessage({ text: 'No previous preferences found or unexpected data format. Please save your preferences.', type: 'info' });\r\n            setUserQuery('');\r\n            setProperties([]);\r\n          }\r\n        } catch (error: any) {\r\n          console.error(\"Error fetching user preferences from backend:\", error);\r\n          setMessage({ text: `Error loading preferences: ${error.message}`, type: 'error' });\r\n          setUserQuery('');\r\n          setProperties([]);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadUserPreferencesFromBackend();\r\n  }, [isAppReady, userId]); // Re-run when app readiness or userId changes\r\n\r\n  // Function to save user preferences and results to backend\r\n  const savePreferences = async (currentQuery: string, currentResults: PropertyDetails[]) => {\r\n    if (!userId) {\r\n      setMessage({ text: 'User not ready. Cannot save preferences.', type: 'error' });\r\n      return;\r\n    }\r\n    try {\r\n      // Assuming a /save_preferences endpoint exists in your backend\r\n      const response = await fetch(`${API_BASE_URL}/save_preferences`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ user_id: userId, preferences: { homePreferences: currentQuery, lastSearchResults: currentResults } })\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Use the specific interface for saving preferences\r\n        const result: LoadSavePreferencesResponseSuccess = await response.json();\r\n        setMessage({ text: result.message || 'Preferences saved successfully!', type: 'success' });\r\n      } else {\r\n        const errorResult: ApiResponseError = await response.json();\r\n        setMessage({ text: `Failed to save preferences: ${errorResult.detail || 'Unknown error'}`, type: 'error' });\r\n      }\r\n\r\n    } catch (error: any) {\r\n      console.error(\"Error saving preferences to backend:\", error);\r\n      setMessage({ text: `Error saving preferences: ${error.message}`, type: 'error' });\r\n    }\r\n  };\r\n\r\n  // Centralized function to process all user queries\r\n  const processAgentRequest = async (intentQuery: string, additionalParams: any = {}) => {\r\n    if (!userId) {\r\n      setMessage({ text: 'User ID not ready. Please try again.', type: 'error' });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setMessage(null); // Clear previous messages\r\n    setProperties([]); // Clear properties on new search\r\n    setGoogleSearchResultsRaw([]); // Clear raw Google results on new search\r\n    // Close all modals when a new request is made\r\n    setShowNegotiationModal(false);\r\n    setShowLegalModal(false);\r\n    setShowMortgageModal(false);\r\n    setShowNeighborhoodModal(false);\r\n    setShowMarketingDescriptionModal(false);\r\n\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/process_query`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          user_id: userId,\r\n          query: intentQuery,\r\n          ...additionalParams,\r\n        })\r\n      });\r\n\r\n      // Handle non-OK responses (HTTP errors) first\r\n      if (!response.ok) {\r\n        const errorResult: ApiResponseError = await response.json(); // Expecting { \"detail\": \"...\" }\r\n        throw new Error(errorResult.detail || 'Unknown backend error');\r\n      }\r\n\r\n      // If response is OK, parse it as ProcessQueryResponseSuccess\r\n      const result: ProcessQueryResponseSuccess = await response.json();\r\n      console.log('Backend Response:', result);\r\n\r\n      if (result.status === 'success' && result.data) {\r\n        switch (result.data.type) {\r\n          case 'properties':\r\n            setProperties(result.data.data);\r\n            await savePreferences(userQuery, result.data.data); // Save the results\r\n            setMessage({ text: 'Properties found!', type: 'success' });\r\n            break;\r\n          case 'Google Search': // Note the space in 'Google Search' from your backend tool\r\n            // When PropertySearch falls back to Google Search, it returns raw google results.\r\n            setGoogleSearchResultsRaw(result.data.data);\r\n            setMessage({ text: 'No mocked properties found. Displaying raw Google Search results.', type: 'info' });\r\n            break;\r\n          case 'negotiation_result':\r\n            setNegotiationResult(result.data.data);\r\n            setShowNegotiationModal(true);\r\n            setMessage({ text: 'Negotiation simulation complete!', type: 'success' });\r\n            break;\r\n          case 'legal_guidance':\r\n            setLegalGuidance(result.data.data);\r\n            setShowLegalModal(true);\r\n            setMessage({ text: 'Legal guidance provided!', type: 'success' });\r\n            break;\r\n          case 'mortgage_recommendations':\r\n            setMortgageRecommendations(result.data.data); // result.data.data is string\r\n            setShowMortgageModal(true);\r\n            setMessage({ text: 'Mortgage recommendations generated!', type: 'success' });\r\n            break;\r\n          case 'neighborhood_insights':\r\n            setNeighborhoodInsights(result.data.data);\r\n            setShowNeighborhoodModal(true);\r\n            setMessage({ text: 'Neighborhood insights retrieved!', type: 'success' });\r\n            break;\r\n          case 'marketing_description':\r\n            setMarketingDescription(result.data.data);\r\n            setShowMarketingDescriptionModal(true);\r\n            setMessage({ text: 'Marketing description generated!', type: 'success' });\r\n            break;\r\n          case 'error': // Explicitly handle backend errors wrapped in a 'success' status\r\n            setMessage({ text: `Backend Error: ${result.data.message || 'Unknown error'}`, type: 'error' });\r\n            break;\r\n          default:\r\n            // This assertion tells TypeScript that result.data at this point must have a 'type' property.\r\n            // This is a pragmatic fix for TypeScript's sometimes over-aggressive type narrowing.\r\n            setMessage({ text: `Received unknown response type: ${(result.data as { type: string }).type}`, type: 'warning' });\r\n            break;\r\n        }\r\n      } else {\r\n        // This 'else' block will be reached if `response.ok` was true, but `result.status` is not 'success'.\r\n        // This implies a successful API call but a logical failure indicated by the backend's 'status' field.\r\n        // Based on your backend, this block should ideally not be hit for /process_query.\r\n        setMessage({ text: `Backend operation failed with unexpected status: ${result.status || 'Unknown'}`, type: 'error' });\r\n      }\r\n\r\n    } catch (error: any) {\r\n      console.error(\"Error processing agent request:\", error);\r\n      setMessage({ text: `Client error: ${error.message}. Please ensure backend is running.`, type: 'error' });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchClick = () => {\r\n    if (!userQuery.trim()) {\r\n      setMessage({ text: 'Please describe your desired home to search.', type: 'info' });\r\n      return;\r\n    }\r\n    processAgentRequest(userQuery); // User query directly goes to process_query\r\n  };\r\n\r\n  const handleNegotiateClick = () => {\r\n    if (!selectedProperty) {\r\n      setMessage({ text: 'Please select a property first to negotiate.', type: 'info' });\r\n      return;\r\n    }\r\n    if (!targetNegotiationPrice.trim()) {\r\n      setMessage({ text: 'Please enter a target price for negotiation.', type: 'info' });\r\n      return;\r\n    }\r\n    processAgentRequest(`Simulate negotiation for ${selectedProperty.name}`, {\r\n      property_details: selectedProperty,\r\n      target_negotiation_price: targetNegotiationPrice\r\n    });\r\n  };\r\n\r\n  const handleLegalGuidanceClick = () => {\r\n    processAgentRequest(\"Provide legal guidance for buying a property in India.\");\r\n  };\r\n\r\n  const handleMortgageRecommendationsClick = () => {\r\n    // Basic validation for mortgage inputs\r\n    if (mortgageIncome <= 0 || mortgageCreditScore <= 0 || mortgageDownPayment < 0 || mortgageLoanAmount <= 0) {\r\n        setMessage({ text: 'Please enter valid positive numbers for all mortgage inputs.', type: 'info' });\r\n        return;\r\n    }\r\n    if (mortgageDownPayment + mortgageLoanAmount <= 0) {\r\n        setMessage({ text: 'Down payment and loan amount cannot both be zero.', type: 'info' });\r\n        return;\r\n    }\r\n\r\n    // Robust price parsing from selectedProperty.price string\r\n    let effectiveLoanAmount = mortgageLoanAmount;\r\n    let effectiveDownPayment = mortgageDownPayment;\r\n    let effectivePropertyType = mortgagePropertyType;\r\n\r\n    if (selectedProperty) {\r\n        const priceString = selectedProperty.price.replace(/[₹,]/g, '').toLowerCase();\r\n        let parsedPriceValueInLakhs: number | null = null;\r\n\r\n        const lakhMatch = priceString.match(/(\\d+\\.?\\d*)\\s*lakh/);\r\n        const croreMatch = priceString.match(/(\\d+\\.?\\d*)\\s*crore/);\r\n\r\n        if (lakhMatch) {\r\n            parsedPriceValueInLakhs = parseFloat(lakhMatch[1]);\r\n        } else if (croreMatch) {\r\n            parsedPriceValueInLakhs = parseFloat(croreMatch[1]) * 100; // Convert Crores to Lakhs\r\n        } else {\r\n            // Fallback for raw numbers without unit, assume lakhs if large enough, or just use as is\r\n            const rawNumber = parseFloat(priceString);\r\n            if (!isNaN(rawNumber)) {\r\n                if (rawNumber > 10000000) { // Heuristic: if very large number, assume it's in absolute INR, convert to lakhs\r\n                    parsedPriceValueInLakhs = rawNumber / 100000;\r\n                } else if (rawNumber > 100000) { // Heuristic: if large number, assume it's in absolute INR, convert to lakhs\r\n                    parsedPriceValueInLakhs = rawNumber / 100000;\r\n                } else {\r\n                    parsedPriceValueInLakhs = rawNumber; // Assume it's already in lakhs or a smaller unit\r\n                }\r\n            }\r\n        }\r\n\r\n        if (parsedPriceValueInLakhs !== null && !isNaN(parsedPriceValueInLakhs) && parsedPriceValueInLakhs > 0) {\r\n            // If a valid property price is parsed, use it to calculate loan/down payment\r\n            // Convert lakhs to absolute INR for the backend if needed, or backend handles lakhs directly\r\n            effectiveLoanAmount = parsedPriceValueInLakhs * 0.8 * 100000; // 80% loan of property price (in Lakhs, convert to absolute INR)\r\n            effectiveDownPayment = parsedPriceValueInLakhs * 0.2 * 100000; // 20% down payment (in Lakhs, convert to absolute INR)\r\n            setMessage({ text: `Using property price (${parsedPriceValueInLakhs} Lakhs) for mortgage calculation.`, type: 'info' });\r\n        } else {\r\n            setMessage({ text: `Could not parse price from selected property (${selectedProperty.price}). Using manual mortgage inputs.`, type: 'warning' });\r\n        }\r\n\r\n        // Simple heuristic for property type based on name\r\n        effectivePropertyType = selectedProperty?.name?.toLowerCase().includes('villa') || selectedProperty?.name?.toLowerCase().includes('house') ? 'independent house' : 'apartment';\r\n    }\r\n\r\n\r\n    processAgentRequest(\"Provide mortgage recommendations.\", {\r\n        income: mortgageIncome,\r\n        credit_score: mortgageCreditScore,\r\n        down_payment: effectiveDownPayment,\r\n        loan_amount: effectiveLoanAmount,\r\n        property_type: effectivePropertyType\r\n    });\r\n  };\r\n\r\n  const handleNeighborhoodInsightsClick = () => {\r\n    if (!selectedProperty || !selectedProperty.location) {\r\n      setMessage({ text: 'Please select a property with a valid location to get neighborhood insights.', type: 'info' });\r\n      return;\r\n    }\r\n    processAgentRequest(`Provide neighborhood insights for ${selectedProperty.location}`, {\r\n      property_details: selectedProperty\r\n    });\r\n  };\r\n\r\n  const handleMarketingDescriptionClick = () => {\r\n    if (!selectedProperty) {\r\n      setMessage({ text: 'Please select a property to generate a marketing description.', type: 'info' });\r\n      return;\r\n    }\r\n    processAgentRequest(`Generate marketing description for ${selectedProperty.name}`, {\r\n      property_details: selectedProperty\r\n    });\r\n  };\r\n\r\n\r\n  // --- Simulated Backend Actions (from home_buying_route.py) ---\r\n  const handleSimulatedAction = async (endpoint: string, details: PropertyDetails) => {\r\n    if (!userId) {\r\n      setMessage({ text: 'User ID not ready. Cannot perform action.', type: 'error' });\r\n      return;\r\n    }\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/${endpoint}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(details),\r\n      });\r\n      if (!res.ok) {\r\n        const errorResult: ApiResponseError = await res.json();\r\n        throw new Error(errorResult.detail || `Failed to perform ${endpoint} due to backend error.`);\r\n      }\r\n      const data = await res.json(); // Assuming success data is { status: \"success\", message: \"...\" }\r\n      setMessage({ text: data.message, type: 'success' });\r\n    } catch (err: any) {\r\n      setMessage({ text: `Error performing ${endpoint}: ${err.message}`, type: 'error' });\r\n    }\r\n  };\r\n\r\n\r\n  // Modals for displaying responses\r\n  const Modal = ({ title, content, isOpen, onClose }: { title: string; content: string; isOpen: boolean; onClose: () => void }) => {\r\n    if (!isOpen) return null;\r\n    return (\r\n      <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto\">\r\n          <h3 className=\"text-xl font-semibold mb-4 text-gray-800\">{title}</h3>\r\n          <p className=\"text-gray-700 whitespace-pre-wrap break-words\">{content}</p> {/* pre-wrap to respect LLM formatting */}\r\n          <button\r\n            onClick={onClose}\r\n            className=\"mt-6 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!isAppReady) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-screen text-lg text-gray-700\">\r\n        <svg className=\"animate-spin -ml-1 mr-3 h-8 w-8 text-blue-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n        </svg>\r\n        Loading application...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 sm:p-6 font-inter text-gray-800 flex flex-col items-center\">\r\n      <div className=\"w-full max-w-4xl bg-white rounded-xl shadow-2xl p-6 sm:p-8 space-y-6\">\r\n        <h1 className=\"text-3xl sm:text-4xl font-extrabold text-center text-indigo-700 mb-4\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 sm:h-10 sm:w-10 inline-block mr-2 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l7 7m-9-9v10a1 1 0 001 1h3m-6-11h8a2 2 0 012 2v8a2 2 0 01-2 2h-8a2 2 0 01-2-2v-8a2 2 0 012-2z\" />\r\n          </svg>\r\n          AI Home Buying Assistant\r\n        </h1>\r\n\r\n        {userId && (\r\n          <p className=\"text-sm text-center text-gray-600 mb-4\">\r\n            Your User ID: <span className=\"font-semibold text-indigo-600 break-all\">{userId}</span>\r\n          </p>\r\n        )}\r\n\r\n        {message && (\r\n          <div className={`p-3 rounded-lg text-center font-medium ${\r\n            message.type === 'success' ? 'bg-green-100 text-green-700' :\r\n            message.type === 'error' ? 'bg-red-100 text-red-700' :\r\n            'bg-blue-100 text-blue-700'\r\n          }`}>\r\n            {message.text}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          <label htmlFor=\"preferences\" className=\"block text-lg font-semibold text-gray-700\">\r\n            Tell me about your dream home:\r\n          </label>\r\n          <textarea\r\n            id=\"preferences\"\r\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-transparent transition duration-200 resize-y min-h-[100px]\"\r\n            placeholder=\"e.g., 'A 3-bedroom apartment in Koramangala, Bangalore, with a budget of 1.2 Crore, near good schools and a park. Modern design, good natural light, and a balcony.' Or 'Find me a 2BHK in a nearby area with high rental under Rs 50 Lakhs.'\"\r\n            value={userQuery} // Changed from 'preferences'\r\n            onChange={(e) => setUserQuery(e.target.value)} // Changed from 'setPreferences'\r\n            disabled={isLoading || !isAppReady}\r\n          ></textarea>\r\n          <button\r\n            onClick={handleSearchClick} // Changed from handleSearch\r\n            className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\r\n            disabled={isLoading || !isAppReady}\r\n          >\r\n            {isLoading ? (\r\n              <>\r\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n                Searching...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                </svg>\r\n                Find My Home\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Preferences Actions */}\r\n        <div className=\"mt-4 flex justify-center gap-4\">\r\n          <button\r\n            onClick={() => savePreferences(userQuery, properties)}\r\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition duration-200 text-sm\"\r\n          >\r\n            Save Current Preferences\r\n          </button>\r\n          {/* Load preferences is already handled by useEffect on app load */}\r\n        </div>\r\n\r\n        {selectedProperty && (\r\n          <div className=\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md\">\r\n            <h3 className=\"text-lg font-semibold text-blue-800 mb-2\">Selected Property:</h3>\r\n            <p className=\"text-blue-700\">\r\n              <strong>{selectedProperty.name}</strong> ({selectedProperty.location}) - {selectedProperty.price}\r\n            </p>\r\n            <button\r\n              onClick={() => setSelectedProperty(null)}\r\n              className=\"mt-2 px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 transition duration-200\"\r\n            >\r\n              Clear Selection\r\n            </button>\r\n\r\n            <div className=\"mt-4 flex flex-col gap-3\">\r\n              <h4 className=\"font-semibold text-gray-700\">Actions for Selected Property:</h4>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={targetNegotiationPrice}\r\n                  onChange={(e) => setTargetNegotiationPrice(e.target.value)}\r\n                  placeholder=\"Target Price (e.g., ₹90 Lakh)\"\r\n                  className=\"p-2 border border-gray-300 rounded-md flex-grow text-gray-700\"\r\n                />\r\n                <button\r\n                  onClick={handleNegotiateClick}\r\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200 disabled:opacity-50 font-semibold\"\r\n                  disabled={isLoading}\r\n                >\r\n                  Simulate Negotiation\r\n                </button>\r\n              </div>\r\n\r\n              {/* Mortgage Inputs */}\r\n              <div className=\"border p-3 rounded-md bg-gray-50 flex flex-col gap-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700\">Mortgage Details (for simulation):</label>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                    <input type=\"number\" placeholder=\"Annual Income (₹)\" value={mortgageIncome} onChange={(e) => setMortgageIncome(parseFloat(e.target.value) || 0)} className=\"p-2 border rounded-md text-gray-700\" />\r\n                    <input type=\"number\" placeholder=\"Credit Score\" value={mortgageCreditScore} onChange={(e) => setMortgageCreditScore(parseInt(e.target.value) || 0)} className=\"p-2 border rounded-md text-gray-700\" />\r\n                    <input type=\"number\" placeholder=\"Down Payment (₹)\" value={mortgageDownPayment} onChange={(e) => setMortgageDownPayment(parseFloat(e.target.value) || 0)} className=\"p-2 border rounded-md text-gray-700\" />\r\n                    <input type=\"number\" placeholder=\"Loan Amount (₹)\" value={mortgageLoanAmount} onChange={(e) => setMortgageLoanAmount(parseFloat(e.target.value) || 0)} className=\"p-2 border rounded-md text-gray-700\" />\r\n                </div>\r\n                <select value={mortgagePropertyType} onChange={(e) => setMortgagePropertyType(e.target.value)} className=\"p-2 border rounded-md text-gray-700\">\r\n                    <option value=\"apartment\">Apartment</option>\r\n                    <option value=\"independent house\">Independent House</option>\r\n                    <option value=\"villa\">Villa</option>\r\n                    <option value=\"plot\">Plot</option>\r\n                </select>\r\n                <button\r\n                    onClick={handleMortgageRecommendationsClick}\r\n                    className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200 disabled:opacity-50 font-semibold mt-2\"\r\n                    disabled={isLoading}\r\n                >\r\n                    Get Mortgage Recommendations\r\n                </button>\r\n              </div>\r\n\r\n\r\n              <button\r\n                onClick={handleNeighborhoodInsightsClick}\r\n                className=\"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200 disabled:opacity-50 font-semibold\"\r\n                disabled={isLoading}\r\n              >\r\n                Get Neighborhood Insights\r\n              </button>\r\n              <button\r\n                onClick={handleMarketingDescriptionClick}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200 disabled:opacity-50 font-semibold\"\r\n                disabled={isLoading}\r\n              >\r\n                Generate Marketing Description\r\n              </button>\r\n              <button\r\n                onClick={() => handleSimulatedAction('book_visit', selectedProperty)}\r\n                className=\"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition duration-200 disabled:opacity-50 font-semibold\"\r\n                disabled={isLoading}\r\n              >\r\n                Simulate Book Visit\r\n              </button>\r\n              <button\r\n                onClick={() => handleSimulatedAction('handle_paperwork', selectedProperty)}\r\n                className=\"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 transition duration-200 disabled:opacity-50 font-semibold\"\r\n                disabled={isLoading}\r\n              >\r\n                Simulate Handle Paperwork\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mt-6 flex flex-wrap justify-center gap-4\">\r\n          <button\r\n            onClick={handleLegalGuidanceClick}\r\n            className=\"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200 disabled:opacity-50 font-semibold\"\r\n            disabled={isLoading}\r\n          >\r\n            Get Legal Guidance\r\n          </button>\r\n        </div>\r\n\r\n        {message && (\r\n          <div\r\n            className={`mt-6 p-3 rounded-md text-center font-medium ${\r\n              message.type === 'error' ? 'bg-red-100 text-red-800' :\r\n              message.type === 'success' ? 'bg-green-100 text-green-700' :\r\n              'bg-blue-100 text-blue-700'\r\n            }`}\r\n          >\r\n            {message.text}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-4xl mt-8\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-4 text-center\">Search Results</h2>\r\n        {isLoading && <p className=\"text-center text-gray-600\">Loading...</p>}\r\n\r\n        {properties.length > 0 && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {properties.map((property) => (\r\n              <div key={property.id} className=\"border border-gray-200 rounded-lg shadow-sm overflow-hidden flex flex-col\">\r\n                <img src={property.imageUrl || \"https://via.placeholder.co/400x300?text=No+Image\"} alt={property.name} className=\"w-full h-48 object-cover\"/>\r\n                <div className=\"p-4 flex-grow\">\r\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-1\">{property.name}</h3>\r\n                  <p className=\"text-gray-700 mb-2\"><strong>Location:</strong> {property.location}</p>\r\n                  <p className=\"text-gray-700 mb-2\"><strong>Price:</strong> {property.price}</p>\r\n                  <p className=\"text-gray-600 text-sm\">\r\n                    {property.bedrooms} BHK | {property.bathrooms} Bath | {property.areaSqFt} SqFt\r\n                  </p>\r\n                  <p className=\"text-gray-600 text-sm mt-2 line-clamp-3\">{property.description}</p>\r\n                </div>\r\n                <div className=\"p-4 border-t border-gray-200 flex justify-between items-center gap-2\">\r\n                  {property.link && (\r\n                    <a href={property.link} target=\"_blank\" rel=\"noopener noreferrer\"\r\n                       className=\"text-blue-600 hover:text-blue-800 text-sm flex-grow\">\r\n                      View Source\r\n                    </a>\r\n                  )}\r\n                  <button\r\n                    onClick={() => setSelectedProperty(property)}\r\n                    className=\"px-3 py-1 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 transition duration-200\"\r\n                  >\r\n                    Select\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {googleSearchResultsRaw.length > 0 && properties.length === 0 && (\r\n            <div className=\"mt-8\">\r\n                <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Raw Google Search Results:</h3>\r\n                <div className=\"space-y-4\">\r\n                    {googleSearchResultsRaw.map((result, index) => (\r\n                        <div key={index} className=\"border border-gray-200 p-4 rounded-lg shadow-sm\">\r\n                            <h4 className=\"text-lg font-medium text-blue-700 hover:underline\">\r\n                                <a href={result.link} target=\"_blank\" rel=\"noopener noreferrer\">{result.title}</a>\r\n                            </h4>\r\n                            <p className=\"text-gray-600 text-sm mt-1\">{result.snippet}</p>\r\n                            <p className=\"text-xs text-gray-500 mt-1\">{result.link}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        )}\r\n\r\n        {!isLoading && properties.length === 0 && googleSearchResultsRaw.length === 0 && message && message.type !== 'error' && (\r\n          <p className=\"text-center text-gray-500\">No properties found yet. Try a search above!</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modals for various results */}\r\n      <Modal\r\n        title=\"Negotiation Simulation Result\"\r\n        content={negotiationResult}\r\n        isOpen={showNegotiationModal}\r\n        onClose={() => setShowNegotiationModal(false)}\r\n      />\r\n      <Modal\r\n        title=\"Legal Guidance for Property Buying in India\"\r\n        content={legalGuidance}\r\n        isOpen={showLegalModal}\r\n        onClose={() => setShowLegalModal(false)}\r\n      />\r\n      <Modal\r\n        title=\"Mortgage Recommendations\"\r\n        content={mortgageRecommendations}\r\n        isOpen={showMortgageModal}\r\n        onClose={() => setShowMortgageModal(false)}\r\n      />\r\n      <Modal\r\n        title=\"Neighborhood Insights\"\r\n        content={neighborhoodInsights}\r\n        isOpen={showNeighborhoodModal}\r\n        onClose={() => setShowNeighborhoodModal(false)}\r\n      />\r\n      <Modal\r\n        title=\"Marketing Description\"\r\n        content={marketingDescription}\r\n        isOpen={showMarketingDescriptionModal}\r\n        onClose={() => setShowMarketingDescriptionModal(false)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}